{"version":3,"sources":["../src/index.js"],"names":["CleanPlugin","constructor","options","ignoreFiles","explicitlyDelFiles","hook","initHookType","apply","compiler","hooks","tap","param","compilation","outputPath","outputOptions","path"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,WAAN,CAAkB;AACjBC,EAAAA,WAAW,CAACC,OAAD,EAAU;AACpB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,WAAL,GAAmBD,OAAO,CAACC,WAAR,IAAuB,EAA1C;AACA,SAAKC,kBAAL,GAA0BF,OAAO,CAACE,kBAAR,IAA8B,IAAxD;AACA,SAAKC,IAAL,GAAY,KAAKC,YAAL,CAAkBJ,OAAO,CAACG,IAA1B,CAAZ;AACA;;AAEDC,EAAAA,YAAY,CAACD,IAAD,EAAO;AAClB,YAAQA,IAAR;AACC,WAAK,MAAL;AACC,eAAOA,IAAP;;AACD;AACC,eAAO,MAAP;AAJF;AAMA;;AAEDE,EAAAA,KAAK,CAACC,QAAD,EAAW;AACfA,IAAAA,QAAQ,CAACC,KAAT,CAAe,KAAKJ,IAApB,EAA0BK,GAA1B,CAA8B,oBAA9B,EAAoDC,KAAK,IAAI;AAC5D,YAAMC,WAAW,GAAGD,KAAK,CAACC,WAAN,IAAqBD,KAAzC;AACA,YAAME,UAAU,GAAGD,WAAW,CAACE,aAAZ,CAA0BC,IAA7C;AACA,4BAAUF,UAAV,EAAsB,KAAKV,WAA3B,EAAwC,KAAKC,kBAA7C;AACA,KAJD;AAKA;;AAvBgB;;eA0BHJ,W","sourcesContent":["import {rmdirSync} from './utils'\n\nclass CleanPlugin {\n\tconstructor(options) {\n\t\tthis.options = options\n\t\tthis.ignoreFiles = options.ignoreFiles || []\n\t\tthis.explicitlyDelFiles = options.explicitlyDelFiles || null\n\t\tthis.hook = this.initHookType(options.hook)\n\t}\n\n\tinitHookType(hook) {\n\t\tswitch (hook) {\n\t\t\tcase 'done':\n\t\t\t\treturn hook\n\t\t\tdefault:\n\t\t\t\treturn 'emit'\n\t\t}\n\t}\n\n\tapply(compiler) {\n\t\tcompiler.hooks[this.hook].tap('Clean output files', param => {\n\t\t\tconst compilation = param.compilation || param\n\t\t\tconst outputPath = compilation.outputOptions.path\n\t\t\trmdirSync(outputPath, this.ignoreFiles, this.explicitlyDelFiles)\n\t\t})\n\t}\n}\n\nexport default CleanPlugin\n"],"file":"index.js"}